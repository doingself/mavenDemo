# ssmProject

Idea + maven (å¤šä¸ª module)

+ Spring + Spring MVC + MyBatis
+ WebSocket
+ Mybatis Generator
+ redis
+ shiro
+ äºŒç»´ç 

+ ExtJS é›†æˆå¤±è´¥

## é¡¹ç›®æ­å»º

### åˆ›å»º Maven é¡¹ç›®

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-0.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-1.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-2.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-3.png)

### æ·»åŠ  module

#### ä½¿ç”¨æ–¹å¼ä¸€ æ·»åŠ  ssmArtifact-core

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-4.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-5.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-6.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-7.png)

#### ä½¿ç”¨æ–¹å¼äºŒ æ·»åŠ  ssmArtifact-web

åªæœ‰ web å‹¾é€‰ `Create from Archetype`, å¹¶é€‰æ‹© `maven-archetype-webapp`

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-8.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-9.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-10.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-11.png)

### å…³è” module

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-12.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-15.png)

### å…¶ä»–è®¾ç½®

+ åˆ é™¤ `ssmProject` çš„ `src`
+ ç»™ `web` æ·»åŠ  `Java`

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-13.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180419-14.png)

### é›†æˆ ExtJS (é›†æˆå¤±è´¥ğŸ˜‚ğŸ˜‚ğŸ˜‚)

1. æ ·å¼æ¯”è¾ƒé€‚åˆåšåç«¯å‰å°ï¼Œé£æ ¼ç»Ÿä¸€ï¼Œç»„ä»¶å®Œå¤‡ï¼ŒåŠŸèƒ½å¼ºå¤§
2. å‡ ä¹ä¸ç”¨å†™æ ·å¼ï¼Œç›´æ¥è°ƒç”¨ç»„ä»¶å°±å¯ä»¥äº†

ExtJSçš„ç‰ˆæœ¬ç¹å¤šï¼Œæœ¬æ–‡æ”¶é›†äº†ExtJSå„ä¸ªç‰ˆæœ¬çš„ä¸‹è½½é“¾æ¥ï¼ŒåŒ…æ‹¬å®˜ç½‘å’Œéå®˜ç½‘çš„ï¼Œä»¥åŠå„ç§æ±‰åŒ–ç‰ˆapiï¼Œæ¬¢è¿å¤§å®¶ä¸‹è½½åˆ†äº«ã€‚

+ ExtJSæœ€æ–°ç‰ˆä¸‹è½½é“¾æ¥ï¼šhttp://www.sencha.com/products/ExtJS/download/
+ ExtJS 4.2.1 ä¸‹è½½é“¾æ¥ï¼šhttp://cdn.sencha.com/ext/gpl/ext-4.2.1-gpl.zip
+ ExtJS 4.0.7 ä¸‹è½½é“¾æ¥ï¼šhttp://cdn.sencha.io/ext-4.0.7-gpl.zip
+ ExtJS 3.4.0 ä¸‹è½½é“¾æ¥ï¼šhttp://cdn.sencha.com/ext/gpl/ext-3.4.1.1-gpl.zip
+ ExtJS 2.3.0 ä¸‹è½½é“¾æ¥ï¼šhttp://dev.sencha.com/deploy/ext-2.3.0.zip

ä¸€èˆ¬å†å²é¡¹ç›®å¾ˆå¤šç”¨çš„æ˜¯2.2.xçš„ç‰ˆæœ¬ï¼Œè€Œä¸”æ²¡æœ‰ç‰ˆæƒé—®é¢˜ã€‚ï¼ˆ2.2.3ç›¸å¯¹ç¨³å®šï¼Œä½†å…¶å®bugä¹Ÿä¸å°‘ï¼‰  
3.xæ¯”èµ·2.xæ”¹è¿›å¾ˆå¤šï¼ŒåŒ…æ‹¬ç¨³å®šæ€§ä¸Šçš„é—®é¢˜ï¼Œä½†éœ€è¦æ³¨æ„ç‰ˆæƒ  
4.xç‰ˆæœ¬æ˜¯ä¸€ä¸ªé£è·ƒå¼çš„ç‰ˆæœ¬ï¼Œæ•´ä¸ªæ¶æ„éƒ½æ›´å®Œå–„äº†ï¼ŒMVCï¼ŒæŒ‰éœ€åŠ è½½ï¼Œpluginæœºåˆ¶ï¼Œcomponentsæ¶æ„ç­‰éƒ½å¾ˆä¸é”™ã€‚  
4.0çš„æ—¶å€™ä¾§é‡äºåº•å±‚æ¶æ„ï¼Œæ€§èƒ½ä¸è¡Œï¼Œåé¢çš„4.1å’Œ4.2çš„changelogéƒ½è¯´å¤§å¹…æ”¹è¿›æ€§èƒ½

#### å‡†å¤‡å·¥ä½œ

+ [DOWNLOAD GPL VERSION OF SENCHA EXT JS](https://www.sencha.com/legal/gpl/)
+ [Download Sencha Cmd](https://www.sencha.com/products/ExtJS/cmd-download/)

#### åˆ›å»º ExtJS é¡¹ç›®

+ è§£å‹ `ext-6.2.0-gpl.zip`
+ è§£å‹ `SenchaCmd-6.2.2-osx-no_jre.app.zip` å¹¶å®‰è£…
+ åˆ›å»º `ssmProject` å·¥ç¨‹ `sencha -sdk /Users/syc/Documents/ext-6.2.0 generate app ssmProject /Users/syc/Documents/workspace/ssmProject`

`export PATH=${PATH}:/Users/syc/bin/Sencha/Cmd/6.2.2.36`

```
bogon:IdeaWorkspace syc$ sencha -sdk ext-6.2.0 generate app ssmProject ssmProject
Sencha Cmd v6.2.2.36
[WRN] the following remote package repository directories did not initialize properly :
[WRN] 	 - /Users/syc/bin/Sencha/Cmd/repo/.sencha
[WRN] 	 - /Users/syc/bin/Sencha/Cmd/repo/pkgs
[ERR] javax/xml/bind/DatatypeConverter
[ERR]
The application was last modified by an older version of Sencha Cmd (6.2.0.103).
Running "sencha package upgrade" may resolve the error described above.
```

#### TODO

åœ¨ç½‘ä¸Šæ‰¾å‰ç«¯æ¡†æ¶çš„èµ„æ–™, å‘ç°ç°åœ¨å·²ç»åŸºæœ¬ä¸ç”¨ ExtJS äº†
æˆ‘ä¸ªäººè¿˜æ˜¯æŒºä¹ æƒ¯ ExtJS çš„, ä½†æ˜¯æ­¤æ¬¡æœªèƒ½æˆåŠŸé›†æˆğŸ˜‚ğŸ˜‚ğŸ˜‚

## ssm æ­å»º

+ å®Œå–„ç›®å½•ç»“æ„(controller / service / dao / model)
+ ä½¿ç”¨ maven å¼•å…¥ ssm/æ•°æ®åº“ç­‰å„ç§ jar åŒ…

## ssm é…ç½®

+ `log4j.properties`
+ `jdbc.properties`
+ `mapping/*.xml`
+ `spring-mvc.xml`
+ `spring-mybatis.xml`
+ `web.xml`

## éƒ¨ç½² Tomcat

+ `war` å°†WEBå·¥ç¨‹ä»¥åŒ…çš„å½¢å¼ä¸Šä¼ åˆ°æœåŠ¡å™¨
	å‘å¸ƒæ¨¡å¼ï¼Œè¿™æ˜¯å…ˆæ‰“æˆwaråŒ…ï¼Œå†å‘å¸ƒ
+ `war exploded` å°†WEBå·¥ç¨‹ä»¥å½“å‰æ–‡ä»¶å¤¹çš„ä½ç½®å…³ç³»ä¸Šä¼ åˆ°æœåŠ¡å™¨
	ç›´æ¥æŠŠæ–‡ä»¶å¤¹ã€jspé¡µé¢ ã€classesç­‰ç­‰ç§»åˆ°Tomcat éƒ¨ç½²æ–‡ä»¶å¤¹é‡Œé¢ï¼Œè¿›è¡ŒåŠ è½½éƒ¨ç½²ã€‚å› æ­¤è¿™ç§æ–¹å¼æ”¯æŒçƒ­éƒ¨ç½²ï¼Œä¸€èˆ¬åœ¨å¼€å‘çš„æ—¶å€™ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹å¼ã€‚

![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180420-0.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180420-1.png)
![image](https://github.com/doingself/mavenDemo/blob/master/images/ssmProject/QQ20180420-2.png)

## ssmProject é›†æˆ WebSocket

spring4.0ä»¥ååŠ å…¥äº†å¯¹websocketæŠ€æœ¯çš„æ”¯æŒ
å‚è€ƒ `package com.syc.websocket`

+ æ·»åŠ  jar åŒ…
+ å®ç° `HandshakeInterceptor`
+ å®ç° `WebSocketHandler`
+ ç»§æ‰¿ `WebMvcConfigurerAdapter` å®ç° `WebSocketConfigurer`
+ æ·»åŠ  spring é…ç½®

## ssmProject é›†æˆ MyBatis Generator

`MyBatis Generator` (MBG) æ˜¯ä¸€ä¸ªMybatisçš„ä»£ç ç”Ÿæˆå™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ ¹æ®æ•°æ®åº“ä¸­è¡¨çš„è®¾è®¡ç”Ÿæˆå¯¹åº”çš„ `å®ä½“ç±»`ï¼Œ`xml Mapper`æ–‡ä»¶ï¼Œæ¥å£ä»¥åŠå¸®åŠ©ç±»(ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¯¥ç±»æ¥è¿›è¡Œç®€å•çš„CRUDæ“ä½œ)ï¼Œè¿™æ ·å°±é¿å…äº†æˆ‘ä»¬æ¯ä½¿ç”¨åˆ°ä¸€å¼ è¡¨çš„æ•°æ®å°±éœ€è¦æ‰‹åŠ¨å»åˆ›å»ºå¯¹åº”çš„ç±»å’Œxmlæ–‡ä»¶ï¼Œè¿™å°±å¸®æˆ‘ä»¬èŠ‚çº¦äº†å¤§é‡çš„æ—¶é—´å»å¼€å‘å’Œä¸šåŠ¡é€»è¾‘æœ‰å…³çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœå¯¹è”åˆæŸ¥è¯¢å’Œå­˜å‚¨è¿‡ç¨‹æ‚¨ä»ç„¶éœ€è¦æ‰‹å†™SQLå’Œå¯¹è±¡ã€‚

1. maven é…ç½®
```xml
    <dependencies>
		<dependency>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-core</artifactId>
            <version>1.3.5</version>
        </dependency>

        ...
    </dependencies>
    <build>
        <finalName>ssmArtifact-web</finalName>

        <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
            <plugins>

                <plugin>
                    <groupId>org.mybatis.generator</groupId>
                    <artifactId>mybatis-generator-maven-plugin</artifactId>
                    <version>1.3.2</version>
                    <configuration>
                        <verbose>true</verbose>
                        <overwrite>true</overwrite>
                    </configuration>
                </plugin>

                ...
            </plugins>
        </pluginManagement>
    </build>
```
2. é…ç½® generatorConfig.xml

	å‚è€ƒ [ssmProject/ssmArtifact-web/generatorConfig.xml](https://github.com/doingself/mavenDemo/blob/master/ssmProject/ssmArtifact-web/src/main/resources/generatorConfig.xml) é…ç½®

3. è¿è¡Œ
```java
        List<String> warnings = new ArrayList<String>();
        boolean overwrite = true;

        //æŒ‡å®š é€†å‘å·¥ç¨‹é…ç½®æ–‡ä»¶
        File configFile = new File(MybatisGenerator.class.getResource("/generatorConfig.xml").getFile());
        ConfigurationParser cp = new ConfigurationParser(warnings);
        Configuration config = null;
        try {
            config = cp.parseConfiguration(configFile);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XMLParserException e) {
            e.printStackTrace();
        }
        DefaultShellCallback callback = new DefaultShellCallback(overwrite);
        MyBatisGenerator myBatisGenerator = null;
        try {
            myBatisGenerator = new MyBatisGenerator(config, callback, warnings);
        } catch (InvalidConfigurationException e) {
            e.printStackTrace();
        }
        try {
            myBatisGenerator.generate(null);
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
```


## ssmProject é›†æˆ Redis

1. æ·»åŠ  maven ä¾èµ–
    + `spring-data-redis` spring-rediså®ç°
    + `jedis` rediså®¢æˆ·ç«¯
    + `mybatis-ehcache` Ehcacheå®ç°,ç”¨äºå‚è€ƒ
2. æ·»åŠ  `redis.properties` æ–‡ä»¶, é…ç½® Redis å‚æ•°
3. æ·»åŠ  `spring-redis.xml` é…ç½®æ–‡ä»¶
4. åœ¨ `web.xml` ä¸­ `contextConfigLocation` è¿›è¡Œé…ç½®

## ssmProject é›†æˆ shiro

1. é…ç½® maven ä¾èµ–
2. é…ç½® `spring-shiro.xml`
3. å®ç°ç±»
4. åœ¨ `web.xml` é…ç½® `DelegatingFilterProxy`

## ssmProject é›†æˆ äºŒç»´ç 

1. é…ç½® maven ä¾èµ– (com.google.zxing)
2. å‚è€ƒ `QRCodeController` ç±»

# sycProject

Idea + Maven å¤š module å·¥ç¨‹, module é—´ç›¸äº’ä¾èµ–çš„ç®€å• Java Web Demo

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-0%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-1%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-2%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-3%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-4%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-5%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-6%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-7%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-8%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-9%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-10%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-11%402x.png)

![image](https://github.com/doingself/mavenDemo/blob/master/images/sycProject/QQ20171218-12%402x.png)

## é¸£è°¢

+ åŸºäºMaven+SSMæ•´åˆshiro+Rediså®ç°åå°ç®¡ç†é¡¹ç›® https://www.cnblogs.com/maixianyu8888/p/8302151.html
+ ssmæ•´åˆRedis https://cloud.tencent.com/developer/article/1019826
+ Mybatis Generatorè‡ªåŠ¨ç”Ÿæˆ https://blog.csdn.net/niqinge/article/details/79280204
+ æ‰“åŒ…æ—¶mapper.xmlæ–‡ä»¶æ‰“ä¸è¿›waråŒ… https://www.cnblogs.com/ANCAN-RAY/p/7009258.html
+ äºŒç»´ç  https://blog.csdn.net/zgliang88/article/details/54617795